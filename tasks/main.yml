---
# tasks file for my_kde_role
- name: System details
  ansible.builtin.debug:
    msg: "{{ item }}"
  with_items: 
  - "ansible_os_family: {{ ansible_os_family }}"
  - "ansible_distribution: {{ ansible_distribution }}"
  - "ansible_distribution_release: {{ ansible_distribution_release }}"
  - "ansible_distribution_version: {{ ansible_distribution_version }}"
  - "ansible_distribution_major_version: {{ ansible_distribution_major_version }}"

- name: Override spectacle package name for Ubuntu.
  ansible.builtin.set_fact:
    kde_spectacle: kde-spectacle
  when: ansible_os_family == 'Debian'

- name: Override kvantum package name for Ubuntu.
  ansible.builtin.set_fact:
    kvantum: qt5-style-kvantum
  when: ansible_os_family == 'Debian'

- name: Install Kde Packages
  become: true
  ansible.builtin.package:
    state: present
    name:
    - kate
    - "{{ kde_spectacle }}"
    - ark
    - konsole
    - dolphin
    - okular
    - gwenview
    - yakuake
    - korganizer
    - kaddressbook
    - kdepim-addons
    - kio-gdrive
    - dolphin-plugins
    - plasma-systemmonitor
    - kcalc
    - plasma-workspace-wallpapers
    - "{{ kvantum }}"
#    - latte-dock # it's not maintained anymore

# In Ubuntu doesn't seem to be there
# maybe it's not needed
- name: Install Kde Addons
  become: true
  ansible.builtin.package:
    state: present
    name:
    - kdeplasma-addons
  when: ansible_os_family != 'Debian'